
<!doctype html><html lang="it"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<link rel="manifest" href="manifest.json"><link rel="apple-touch-icon" href="assets/logo.png">
<meta name="theme-color" content="#0b0f1a">
<title>Sforzu</title><link rel="stylesheet" href="styles.css">
</head><body>
<div class="container">
  <div class="header"><img src="assets/logo.png" alt="Sforzu"><div><h1>Sforzu</h1><div class="small">Watt test e CPET — calcolatore clinico rapido</div></div></div>

  <div id="screenStart" class="card">
    <h2>Che esame vuoi eseguire?</h2>
    <div class="grid">
      <button class="btn" onclick="go('watt')">WATT TEST</button>
      <button class="btn" onclick="go('cpet')">CPET</button>
    </div>
  </div>

  <!-- WATT TEST -->
  <div id="screenWatt" class="card hidden">
    <div class="row" style="justify-content:space-between;align-items:center">
      <h2>Watt Test</h2><button class="chip" onclick="back()">← Indietro</button>
    </div>
    <div class="grid">
      <div><label>Ergometro</label><select id="wt_erg"><option value="cycle">Cicloergometro</option><option value="tread">Treadmill</option></select></div>
      <div><label>Profilo</label><select id="wt_profile">
        <option value="std">Standard</option><option value="athlete">Atleta</option><option value="ihd">Cardiopatia ischemica</option><option value="beta">β-bloccanti</option>
      </select></div>
    </div>
    <div class="grid">
      <div><label>Età (anni)</label><input id="wt_age" type="number"></div>
      <div><label>Sesso</label><select id="wt_sex"><option value="M">Maschio</option><option value="F">Femmina</option></select></div>
    </div>
    <div class="grid">
      <div><label>Peso (kg)</label><input id="wt_w" type="number" step="0.1"></div>
      <div><label>Altezza (cm)</label><input id="wt_h" type="number" step="0.5"></div>
    </div>

    <div class="toggle" onclick="toggle('wt_adv')"><span>Parametri avanzati (opzionali)</span><span class="small">tocca per aprire</span></div>
    <div id="wt_adv" class="hidden">
      <div class="grid3">
        <div><label>FC riposo (bpm)</label><input id="wt_hrR" type="number"></div>
        <div><label>FC picco (bpm)</label><input id="wt_hrP" type="number"></div>
        <div><label>FC 1' rec (bpm)</label><input id="wt_hr1" type="number"></div>
      </div>
      <div class="grid3">
        <div><label>PAS riposo</label><input id="wt_sbpR" type="number"></div>
        <div><label>PAS picco</label><input id="wt_sbpP" type="number"></div>
        <div><label>PAS 3' rec</label><input id="wt_sbpRec" type="number"></div>
      </div>
      <div class="grid3">
        <div><label>Durata esercizio (min)</label><input id="wt_dur" type="number" step="0.1"></div>
        <div><label>Rampa (W/min)</label><input id="wt_ramp" type="number"></div>
        <div><label>W picco (W)</label><input id="wt_wpk" type="number"></div>
      </div>
    </div>
    <div class="row"><button class="btn" onclick="suggestWatt()">Suggerisci protocollo</button><button class="btn" onclick="calcWatt()">Calcola</button></div>
    <div id="wt_out" class="card" style="margin-top:10px"></div>
  </div>

  <!-- CPET -->
  <div id="screenCPET" class="card hidden">
    <div class="row" style="justify-content:space-between;align-items:center">
      <h2>CPET</h2><button class="chip" onclick="back()">← Indietro</button>
    </div>
    <div class="grid">
      <div><label>Ergometro</label><select id="cp_erg"><option value="cycle">Cicloergometro</option><option value="tread">Treadmill</option></select></div>
      <div><label>Profilo</label><select id="cp_profile">
        <option value="std">Standard</option><option value="athlete">Atleta</option><option value="ihd">Cardiopatia ischemica</option><option value="beta">β-bloccanti</option>
      </select></div>
    </div>
    <div class="grid">
      <div><label>Età</label><input id="cp_age" type="number"></div>
      <div><label>Sesso</label><select id="cp_sex"><option value="M">Maschio</option><option value="F">Femmina</option></select></div>
    </div>
    <div class="grid">
      <div><label>Peso (kg)</label><input id="cp_w" type="number" step="0.1"></div>
      <div><label>Altezza (cm)</label><input id="cp_h" type="number" step="0.5"></div>
    </div>

    <div class="toggle" onclick="toggle('cp_adv')"><span>Parametri ventilatori & emodinamici (opz.)</span><span class="small">tocca per aprire</span></div>
    <div id="cp_adv" class="hidden">
      <div class="grid3">
        <div><label>VO₂ picco (ml/kg/min)</label><input id="cp_vo2pk" type="number" step="0.1"></div>
        <div><label>AT (ml/kg/min)</label><input id="cp_vat" type="number" step="0.1"></div>
        <div><label>RER picco</label><input id="cp_rer" type="number" step="0.01"></div>
      </div>
      <div class="grid3">
        <div><label>VE/VCO₂ slope</label><input id="cp_slope" type="number" step="0.1"></div>
        <div><label>ΔVO₂/ΔW (ml/min/W)</label><input id="cp_dvow" type="number" step="0.1"></div>
        <div><label>OUES</label><input id="cp_oues" type="number" step="0.01"></div>
      </div>
      <div class="grid3">
        <div><label>VE picco (L/min)</label><input id="cp_vepk" type="number" step="0.1"></div>
        <div><label>MVV (L/min) (vuoto = FEV₁×40)</label><input id="cp_mvv" type="number"></div>
        <div><label>SpO₂ minima (%)</label><input id="cp_spo2" type="number" step="0.1"></div>
      </div>
    </div>

    <div class="toggle" onclick="toggle('cp_spiro')"><span>Modulo spirometria (opzionale)</span><span class="small">GLI-lite</span></div>
    <div id="cp_spiro" class="hidden">
      <div class="grid3">
        <div><label>FEV₁ (L)</label><input id="sp_fev1" type="number" step="0.01"></div>
        <div><label>FVC (L)</label><input id="sp_fvc" type="number" step="0.01"></div>
        <div><label>FEV₁/FVC (%)</label><input id="sp_ratio" type="number" step="0.1"></div>
      </div>
    </div>

    <div class="row"><button class="btn" onclick="suggestCPET()">Suggerisci protocollo</button><button class="btn" onclick="calcCPET()">Calcola</button></div>
    <div id="cp_out" class="card" style="margin-top:10px"></div>
  </div>

  <footer>v9.8 • PWA • nessun dato salvato • iPhone-optimized</footer>
</div>
<script defer src="app.js"></script>
<script>if('serviceWorker' in navigator){navigator.serviceWorker.register('./sw.js')}</script>
</body></html>
